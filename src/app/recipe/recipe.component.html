<div>
  <div>
    <input type="radio" [name]="craftable()" class="radio radio-primary" />
    <recipe-summary class="ml-2" [recipe]="recipe()"></recipe-summary>
    <input
      type="number"
      class="input validator inline ml-4 w-24"
      min="0"
      title="How many to produce"
      (change)="onCraftCountChanged($event)"
    />
    <div class="validator-hint inline">Must be greater than 0</div>
  </div>

  @for (input of recipe().inputs; track input) {
    @if (game_assets.get(input.craftable)!.recipes.length == 0) {
      <div class="border rounded-xl p-2">
        <app-craftable
          (selected)="onSelected(recipe().id, input.craftable)"
          [isSelected]="selectedCraftable() === input.craftable"
          [asset]="game_assets.get(input.craftable)!"
        ></app-craftable>
        {{ input.count * craftCount() }}
      </div>
    } @else {
      <div class="collapse collapse-arrow border">
        <input type="checkbox" />
        <div class="collapse-title">
          <app-craftable
            (selected)="onSelected(recipe().id, input.craftable)"
            [isSelected]="selectedCraftable() === input.craftable"
            [asset]="game_assets.get(input.craftable)!"
          ></app-craftable>
          {{ input.count * craftCount() }}
        </div>
        <div class="collapse-content">
          <recipe-list
            [craftable]="input.craftable"
            [selectedCraftable]="selectedCraftable()"
            [recipes]="game_assets.get(input.craftable)!.recipes"
          ></recipe-list>
        </div>
      </div>
    }
  }
</div>
